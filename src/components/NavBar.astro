---
import LogoIcon from '../assets/icons/icon.astro';
import InstagramIcon from '../assets/icons/InstagramIcon.astro';
import TelegramIcon from '../assets/icons/TelegramIcon.astro';
---

<div class="navbar__marquee swiper navbar-marquee">
  <div class="swiper-wrapper">
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
    <!-- duplicate for seamless loop -->
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
    <div class="swiper-slide navbar-marquee-slide">
      <span>Сайт в тестовом режиме</span>
    </div>
  </div>
</div>

<nav class="navbar" aria-label="Main navigation">
  <div class="navbar-inner">
    <a href="/" class="logo">
      <LogoIcon />
      <span>ISOLA</span>
    </a>

    <ul class="nav-links">
      <li><a href="#about">О нас</a></li>
      <li><a href="#portfolio">Наши коллекции</a></li>
      <li><a href="#faq">Часто задаваемые вопросы</a></li>
      <li><a href="/contacts">Контакты</a></li>
    </ul>

    <button class="hamburger" aria-label="Open menu" aria-expanded="false">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</nav>

<div class="mobile-menu-overlay" aria-hidden="true">
  <ul class="mobile-menu">
    <li><a href="#about">О нас</a></li>
    <li><a href="#portfolio">Наши коллекции</a></li>
    <li><a href="#services">Новости и события</a></li>
    <li><a href="#faq">Доверяют нам</a></li>
    <li><a href="/contacts">Контакты</a></li>
    <li class="social-item">
      <a
        href="https://www.instagram.com/isola_uz?igsh=aXptaWo4bGJrZGVs"
        class="social-button"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Instagram"
      >
        <InstagramIcon />
      </a>
      <a
        href="https://t.me/isola_uz"
        class="social-button"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Telegram"
      >
        <TelegramIcon />
      </a>
    </li>
    <li class="contact-item">
      <a
        href="tel:+998991227766"
        class="contact-button-menu"
        aria-label="Call +998 99 122 77 66"
      >
        +998 99 122 77 66
      </a>
      <a
        href="tel:+998901227788"
        class="contact-button-menu"
        aria-label="Call +998 90 122 77 88"
      >
        +998 90 122 77 88
      </a>
      <!-- <a
        href="mailto:info@example.com"
        class="contact-button-menu"
        aria-label="Email info@example.com"
      >
        isola@example.com
      </a> -->
    </li>
  </ul>
</div>

<script>
  import Swiper from 'swiper';
  import { Autoplay } from 'swiper/modules';
  import 'swiper/css';

  new Swiper('.navbar-marquee', {
    modules: [Autoplay],
    loop: true,
    slidesPerView: 'auto',
    spaceBetween: 0,
    speed: 9000,
    allowTouchMove: false,
    autoplay: {
      delay: 0,
      disableOnInteraction: false,
    },
  });

  document.addEventListener('DOMContentLoaded', () => {
    const hamburger = document.querySelector('.hamburger');
    const overlay = document.querySelector('.mobile-menu-overlay');

    if (!hamburger || !overlay) return;

    hamburger.addEventListener('click', () => {
      const isOpen = hamburger.classList.toggle('is-active');
      overlay.classList.toggle('is-visible', isOpen);
      hamburger.setAttribute('aria-expanded', String(isOpen));
    });

    overlay.querySelectorAll('a').forEach((link) => {
      link.addEventListener('click', () => {
        hamburger.classList.remove('is-active');
        overlay.classList.remove('is-visible');
        hamburger.setAttribute('aria-expanded', 'false');
      });
    });
  });
</script>
